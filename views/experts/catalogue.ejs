
<div class="container mt-4">
  <div class="row">
    <!-- Colonne Filtres -->
    <div class="col-md-3">
      <h5>Filtres</h5>
      <form method="GET" action="/experts/catalogue">
        <div class="mb-3">
          <label for="type" class="form-label">Type de produits</label>
          <select name="type" class="form-select">
            <option value="Toutes">Toutes</option>
            <option value="Expert" <%= type === 'Expert' ? 'selected' : '' %>>Expert</option>
            <option value="Indicateur" <%= type === 'Indicateur' ? 'selected' : '' %>>Indicateur</option>
          </select>
        </div>

        <div class="mb-3">
          <label for="price" class="form-label">Prix maximum</label>
          <input type="number" name="price" class="form-control" placeholder="Ex: 100$" value="<%= price || '' %>">
        </div>

        <button type="submit" class="btn btn-primary w-100">Filtrer</button>
      </form>
    </div>

    <!-- Colonne Produits -->
    <div class="col-md-9">
      <div class="row">
        <% products.forEach(function(product) { %>
          <div class="col-md-4 mb-4">
            <div class="card h-100">
              <img src="/images/produits/<%= product.image %>" class="card-img-top object-fit-cover" style="height: 200px;" alt="<%= product.name %>">
              <div class="card-body">
                <h5 class="card-title"><%= product.name %></h5>
                <p class="card-text"><%= product.company %> - <%= product.type %></p>
                <p class="card-text text-success fw-bold"><%= Number(product.price).toFixed(0) %>$</p>
              </div>
              <div class="card-footer d-flex justify-content-end gap-2">
                <a href="/experts/<%= product.id %>" class="btn btn-sm btn-catalogue">Voir</a>
                <form action="/experts/shopping-cart/add/<%= product.id %>" method="POST">
                  <button type="submit" class="btn btn-sm btn-catalogue">Ajouter</button>
                </form>
              </div>
            </div>
          </div>
        <% }); %>
      </div>

      <% if (pagination) { %>
        <nav>
          <ul class="pagination justify-content-center">
            <% if (pagination.currentPage > 1) { %>
              <li class="page-item">
                <a class="page-link" href="?page=<%= pagination.currentPage - 1 %>">
                  <i class="bi bi-chevron-left"></i>
                </a>
              </li>
            <% } else { %>
              <li class="page-item disabled">
                <span class="page-link"><i class="bi bi-chevron-left"></i></span>
              </li>
            <% } %>

            <% for (let i = 1; i <= pagination.totalPages; i++) { %>
              <li class="page-item <%= i === pagination.currentPage ? 'active' : '' %>">
                <a class="page-link" href="?page=<%= i %>"><%= i %></a>
              </li>
            <% } %>

            <% if (pagination.currentPage < pagination.totalPages) { %>
              <li class="page-item">
                <a class="page-link" href="?page=<%= pagination.currentPage + 1 %>">
                  <i class="bi bi-chevron-right"></i>
                </a>
              </li>
            <% } else { %>
              <li class="page-item disabled">
                <span class="page-link"><i class="bi bi-chevron-right"></i></span>
              </li>
            <% } %>
          </ul>
        </nav>
      <% } %>
    </div>
  </div>
</div>

